<?php namespace Illuminate\Session; use Illuminate\Support\ServiceProvider; class SessionServiceProvider extends ServiceProvider { public function register() { $this->setupDefaultDriver(); $this->registerSessionManager(); $this->registerSessionDriver(); } protected function setupDefaultDriver() { if ($this->app->runningInConsole()) { $this->app['config']['session.driver'] = 'array'; } } protected function registerSessionManager() { $this->app->bindShared('session', function($app) { return new SessionManager($app); }); } protected function registerSessionDriver() { $this->app->bindShared('session.store', function($app) { $manager = $app['session']; return $manager->driver(); }); } protected function getDriver() { return $this->app['config']['session.driver']; } }
