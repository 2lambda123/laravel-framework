<?php namespace Illuminate\Auth\Console; use Illuminate\Console\Command; use Illuminate\Filesystem\Filesystem; class RemindersTableCommand extends Command { protected $name = 'auth:reminders-table'; protected $description = 'Create a migration for the password reminders table'; protected $files; public function __construct(Filesystem $files) { parent::__construct(); $this->files = $files; } public function fire() { $fullPath = $this->createBaseMigration(); $this->files->put($fullPath, $this->getMigrationStub()); $this->info('Migration created successfully!'); $this->call('dump-autoload'); } protected function createBaseMigration() { $name = 'create_password_reminders_table'; $path = $this->laravel['path'].'/database/migrations'; return $this->laravel['migration.creator']->create($name, $path); } protected function getMigrationStub() { $stub = $this->files->get(__DIR__.'/stubs/reminders.stub'); return str_replace('password_reminders', $this->getTable(), $stub); } protected function getTable() { return $this->laravel['config']->get('auth.reminder.table'); } }
