<?php namespace Illuminate\Cache; use Illuminate\Support\ServiceProvider; class CacheServiceProvider extends ServiceProvider { protected $defer = true; public function register() { $this->app->bindShared('cache', function($app) { return new CacheManager($app); }); $this->app->bindShared('cache.store', function($app) { return $app['cache']->driver(); }); $this->app->bindShared('memcached.connector', function() { return new MemcachedConnector; }); $this->registerCommands(); } public function registerCommands() { $this->app->bindShared('command.cache.clear', function($app) { return new Console\ClearCommand($app['cache'], $app['files']); }); $this->commands('command.cache.clear'); } public function provides() { return array('cache', 'cache.store', 'memcached.connector', 'command.cache.clear'); } }
