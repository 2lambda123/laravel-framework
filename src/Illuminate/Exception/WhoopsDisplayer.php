<?php namespace Illuminate\Exception; use Exception; use Whoops\Run; use Symfony\Component\HttpFoundation\Response; use Symfony\Component\HttpKernel\Exception\HttpExceptionInterface; class WhoopsDisplayer implements ExceptionDisplayerInterface { protected $whoops; protected $runningInConsole; public function __construct(Run $whoops, $runningInConsole) { $this->whoops = $whoops; $this->runningInConsole = $runningInConsole; } public function display(Exception $exception) { $status = $exception instanceof HttpExceptionInterface ? $exception->getStatusCode() : 500; $headers = $exception instanceof HttpExceptionInterface ? $exception->getHeaders() : array(); return new Response($this->whoops->handleException($exception), $status, $headers); } }
