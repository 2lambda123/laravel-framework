<?php namespace Illuminate\Validation; use Illuminate\Support\ServiceProvider; class ValidationServiceProvider extends ServiceProvider { protected $defer = true; public function register() { $this->registerPresenceVerifier(); $this->app->bindShared('validator', function($app) { $validator = new Factory($app['translator'], $app); if (isset($app['validation.presence'])) { $validator->setPresenceVerifier($app['validation.presence']); } return $validator; }); } protected function registerPresenceVerifier() { $this->app->bindShared('validation.presence', function($app) { return new DatabasePresenceVerifier($app['db']); }); } public function provides() { return array('validator', 'validation.presence'); } }
